<div class="container">
    <div class="profile-block">

        <div>
            <form [formGroup]="form" (ngSubmit)="submitForm()" method="post" enctype="multipart/form-data">
                <div class="d-flex flex-column align-items-center">
                    <div class="profile-avatar">
                        <div *ngIf="!isUploaded; else elseBlock">
                            <img src="../../../assets/images/no-photo.png" alt="avatar">
                        </div>
                        <ng-template #elseBlock>
                            <img [src]="selectedFile.src" [alt]="selectedFile.name">
                        </ng-template>
                    </div>
                    <div class="alert alert-info mb-4" *ngIf="status !== 'init'">
                        <span *ngIf="status === 'ok'">Image uploaded successfully!</span>
                        <span *ngIf="status === 'fail'">Failed to upload an image</span>
                    </div>
                    <label for="avatarLabel">
                        <mat-chip-list>
                            <mat-chip>Change photo</mat-chip>
                        </mat-chip-list>
                        <input
                            hidden
                            #imageInput
                            (change)="processFile(imageInput)"
                            type="file"
                            accept="image/*"
                            id="avatarLabel"
                            formControlName="avatar"
                        >
                    </label>
                    <div class="mb-4 mt-4" *ngIf="status !== 'init'">
                        <mat-spinner diameter="50"></mat-spinner>
                    </div>
                    <div class="d-flex mb-5">
                        <button [disabled]="status == 'fail'" type="submit" mat-flat-button color="primary"
                                class="ml-2 mr-2">Edit
                        </button>
                    </div>
                </div>
            </form>
        </div>

        <div class="row">
            <div class="col-12 col-sm-12 offset-md-1 col-md-10 offset-lg-3 col-lg-6">
                <ul class="list-group pb-4">
                    <li class="list-group-item">Username: {{userName}}</li>
                    <li class="list-group-item">Email: {{userEmail}}</li>
                    <li class="list-group-item">City: {{userCity}}</li>
                    <li class="list-group-item" *ngIf="userAdress">Adress: {{userAdress}}</li>
                </ul>
                <button mat-flat-button color="accent" type="button" (click)="logOut()">Log out</button>
            </div>
        </div>
    </div>
</div>
